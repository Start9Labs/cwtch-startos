id: cwtch 
title: "Cwtch"
version: 1.5.2.0
release-notes: "Initial version for EmbassyOS v0.3.0"
license: mit
wrapper-repo: "https://github.com/Start9Labs/cwtch-wrapper"
upstream-repo: "https://git.openprivacy.ca/cwtch.im/server"
support-site: "https://cwtch.im/"
marketing-site: "https://cwtch.im/"
build: ["make"]
min-os-version: "0.3.0"
description:
  short: A free, open-source flutter based messaging platform.
  long: |
    Cwtch (/kʊtʃ/ - a Welsh word roughly translating to “a hug that creates a safe place”) is a decentralized, privacy-preserving, multi-party messaging protocol that can be used to build metadata resistant applications.
assets:
  license: LICENSE
  icon: icon.png
  instructions: docs/instructions.md
  docker-images: image.tar
main:
  type: docker
  image: main
  entrypoint: "docker_entrypoint.sh"
  args: []
  mounts:
    main: /root/persistence
    compat: /mnt/assets
  io-format: yaml
health-checks: {} 
config:
  get:
    type: docker
    image: compat
    system: true
    entrypoint: compat
    args: 
      - config
      - get
      - /root/persistence
      - /mnt/assets/config_spec.yaml
    mounts:
      main: /root/persistence
      compat: /mnt/assets
    io-format: yaml
  set:
    type: docker
    image: compat
    system: true
    entrypoint: compat
    args:
      - config
      - set
      - cwtch
      - /root/persistence
      - /mnt/assets/config_rules.yaml
    mounts:
      main: /root/persistence
      compat: /mnt/assets
    io-format: yaml
properties:
  type: docker
  image: compat
  system: true
  entrypoint: compat
  args:
    - properties
    - /root/persistence
  mounts:
    main: /root/persistence
  io-format: yaml
dependencies: {} 
volumes: 
  main:
    type: data 
  compat:
    type: assets 
interfaces:
  main:
    name: Network Interface
    description: Specifies the interface to listen on for HTTP connections.
    tor-config:
      port-mapping:
        80: "80"
    lan-config:
      80:
        ssl: false
        mapping: 80
    ui: true
    protocols:
      - tcp
      - http
alerts:
  install: |
    After starting Cwtch for the first time, it will generate a 'Server Bundle' that you can use to join the server with any Cwtch UI client.
    Make sure to protect this data, it has admin rights to create users and rooms on this server.
backup:
  create:
    type: docker
    image: compat
    system: true
    entrypoint: compat
    args:
      - duplicity
      - create
      - /mnt/backup
      - /root/persistence
    mounts:
      BACKUP: /mnt/backup
      main: /root/persistence
    io-format: yaml
  restore:
    type: docker
    image: compat
    system: true
    entrypoint: compat
    args:
      - duplicity
      - restore
      - /mnt/backup
      - /root/persistence
    mounts:
      BACKUP: /mnt/backup
      main: /root/persistence
    io-format: yaml